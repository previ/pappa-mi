<script type="text/javascript">
dojo.require("dijit.form.Form");
dojo.require("dijit.form.NumberTextBox");
dojo.require("dijit.form.ComboBox");
dojo.require("dijit.form.Button");
dojo.require("dijit.Dialog");
</script>
<script src="http://www.google.com/jsapi" type="text/javascript"></script>
<script src="/js/gviz.js" type="text/javascript"></script>
<script>
    google.load('visualization', '1', {'packages' : ['table']});
    google.setOnLoadCallback(init);

    var dataSourceUrl = '/admin/commissione/getdata';
    var query, options, container;

    function init() {
      query = new google.visualization.Query(dataSourceUrl);
      container = document.getElementById("table_div");
      options = {'pageSize': 10};
      sendAndDraw();
    }

    function sendAndDraw() {
      query.abort();
      var tableQueryWrapper = new TableQueryWrapper(query, container, options);
      tableQueryWrapper.sendAndDraw();
    } 
    /*
    function drawTable() {
    var table = new google.visualization.Table(document.getElementById('table_div'));
    var query = new google.visualization.Query('/admin/commissione/getdata');
    var data = new google.visualization.DataTable({{gvizdata}}, 0.6);

    table.draw(data, {allowHtml: true, page: 'event', pagingButtonsConfiguration: 'both'});
    var self = this;
    var addListener = google.visualization.events.addListener;
    addListener(table, 'page', function(e) {
        if(e['page'] == -1 && {{prev}} >= 0 )
            location.href = '/admin/commissione?offset={{prev}}&tipoScuola={{tipoScuola}}&centroCucina={{centroCucina}}&zona={{zona}}';
        else if(e['page'] == 1 && {{next}} >= 0 )
            location.href = '/admin/commissione?offset={{next}}&tipoScuola={{tipoScuola}}&centroCucina={{centroCucina}}&zona={{zona}}';
    });      
}
*/
</script>
<h1>Pagina Gestione Commissioni</h1>
<div dojoType="dijit.form.DropDownButton">
  <span>Filtra dati</span>
  <div dojoType="dijit.TooltipDialog" id="tooltipDlg" title="Filtra"
    execute="alert('submitted w/args:\n' + dojo.toJson(arguments[0], true));">
<form dojoType="dijit.form.Form" action="/admin/commissione" method="get" id="form_0">
<input type="hidden" name="cmd" value="list"/>
<script type="dojo/method" event="onSubmit">
if(this.validate()){
    return true;
} else {
    alert('Il form contiene valori non corretti');
    return false;
}
</script>
<table>
<!--tr>
<td>
<LABEL class="ss-q-title" for="entry_1">Nome</LABEL>
<INPUT type="text" size="10" name="nome" value="{{nome}}" class="ss-q-short" id="entry_1">
</td>
</tr-->
<tr>
<td>
<LABEL class="ss-q-title" for="entry_3">Tipo</LABEL>
<SELECT name="tipoScuola" id="entry_3">
<OPTION value=""></OPTION>
<OPTION value="Materna"{% ifequal tipoScuola "Materna" %} selected{% endifequal %}>Materna</OPTION>
<OPTION value="Primaria"{% ifequal tipoScuola "Primaria" %} selected{% endifequal %}>Primaria</OPTION>
<OPTION value="Secondaria"{% ifequal tipoScuola "Secondaria" %} selected{% endifequal %}>Secondaria</OPTION>
</SELECT>
</td>
</tr>
<tr>
<td>
<LABEL class="ss-q-title" for="entry_4">C.Cucina</LABEL>
<SELECT name="centroCucina" id="entry_4">
<OPTION value=""></OPTION>{%for cc in centriCucina%}
<OPTION value="{{cc.key}}"{% ifequal centroCucina cc.key %} selected{% endifequal %}>{{cc.nome}}</OPTION>{%endfor%}
</select>
</td>
</tr>
<tr>
<td>
<LABEL class="ss-q-title" for="entry_5">Zona</LABEL>
<INPUT type="text" size="2" name="zona" value="{{zona}}" class="ss-q-short" id="entry_5">
</td>
</tr>
<tr>
<td>
<LABEL class="ss-q-title" for="entry_6">Distretto</LABEL>
<INPUT type="text" size="2" name="distretto" value="{{distretto}}" class="ss-q-short" id="entry_6">
</td>
</tr>
<tr>
<td>
<input type="submit" value="Cerca">
</td>
</tr>
</table>
</form>
</div>
</div>
<div id="table_div"></div>
<br/>
<DIV class="goog-ws-half-width goog-ws-left">
<A href="/admin/commissione?cmd=open" class="btn"><B><B><B><B style="font-weight:bold !important;">Aggiungi Commissione</B></B></B></B></A>
</DIV>
from datetime import date, datetime, time, timedelta

from google.appengine.ext import db

class CentroCucina(db.Model):
  nome = db.StringProperty()
  strada = db.StringProperty()
  civico = db.StringProperty()
  citta = db.StringProperty()
  cap = db.StringProperty()
  telefono = db.StringProperty()
  fax = db.StringProperty()
  email = db.EmailProperty()


class Commissione(db.Model):
  nome = db.StringProperty()
  nomeScuola = db.StringProperty()
  tipoScuola = db.StringProperty()
  codiceScuola = db.StringProperty()
  distretto = db.StringProperty()
  zona = db.StringProperty()
  strada = db.StringProperty()
  civico = db.StringProperty()
  citta = db.StringProperty()
  cap = db.StringProperty()
  telefono = db.StringProperty()
  fax = db.StringProperty()
  email = db.EmailProperty()
  geo = db.GeoPtProperty()
  centroCucina = db.ReferenceProperty(CentroCucina)

class Commissario(db.Model):
  user = db.UserProperty()
  nome = db.StringProperty()
  cognome = db.StringProperty()
  
  def commissioni(self):
    commissioni = []
    for cc in CommissioneCommissario.all().filter("commissario", self):
      commissioni.append(cc.commissione)
    return commissioni
  
class CommissioneCommissario(db.Model):
  commissione = db.ReferenceProperty(Commissione)
  commissario = db.ReferenceProperty(Commissario)
  
class Menu(db.Model):
  centroCucina = db.ReferenceProperty(CentroCucina)
  validitaDa = db.DateProperty()
  validitaA = db.DateProperty()
  settimana = db.IntegerProperty()
  giorno = db.IntegerProperty()
  primo = db.StringProperty()
  secondo = db.StringProperty()
  contorno = db.StringProperty()
  
class Ispezione(db.Model):
      
  commissione = db.ReferenceProperty(Commissione)
  commissario = db.ReferenceProperty(Commissario)
 
  creato_da = db.UserProperty(auto_current_user_add=True)
  creato_il = db.DateTimeProperty(auto_now_add=True)
  modificato_da = db.UserProperty(auto_current_user=True)
  modificato_il = db.DateTimeProperty(auto_now=True)
  
  data = db.DateProperty()

  ncCrudoBruciato = db.StringProperty()
  ncCorpiEstranei = db.StringProperty()
  ncCattivoOdore = db.StringProperty()
  ncGustoSospetto = db.StringProperty()
  ncRichiestaCampionatura = db.StringProperty()
  ncMenuImprevisto = db.StringProperty()

  numeroPastiTotale = db.IntegerProperty()
  numeroPastiBambini = db.IntegerProperty()
  numeroPastiSpeciali = db.IntegerProperty()
  numeroAddetti = db.IntegerProperty()

  puliziaRefettorio = db.IntegerProperty()

  ricicloStoviglie = db.StringProperty()
  ricicloPosate = db.StringProperty()
  ricicloBicchieri = db.StringProperty()

  arrivoTermiche = db.TimeProperty()

  primoDistribuzione = db.TimeProperty()
  primoCottura = db.IntegerProperty()
  primoTemperatura = db.IntegerProperty()
  primoAssaggio = db.IntegerProperty()
  primoGradimento = db.IntegerProperty()
  primoQuantita = db.IntegerProperty()
  primoPrevisto = db.StringProperty()
  primoEffettivo = db.StringProperty()
  #primoNote = db.TextProperty()

  secondoDistribuzione = db.TimeProperty()
  secondoCottura = db.IntegerProperty()
  secondoTemperatura = db.IntegerProperty()
  secondoAssaggio = db.IntegerProperty()
  secondoGradimento = db.IntegerProperty()
  secondoQuantita = db.IntegerProperty()
  secondoPrevisto = db.StringProperty()
  secondoEffettivo = db.StringProperty()
  #secondoNote = db.TextProperty()

  contornoCottura = db.IntegerProperty()
  contornoTemperatura = db.IntegerProperty()
  contornoAssaggio = db.IntegerProperty()
  contornoGradimento = db.IntegerProperty()
  contornoQuantita = db.IntegerProperty()
  contornoPrevisto = db.StringProperty()
  contornoEffettivo = db.StringProperty()
  #contornoNote = db.TextProperty()

  paneAssaggio = db.IntegerProperty()
  paneGradimento = db.IntegerProperty()
  paneQuantita = db.IntegerProperty()
  #paneNote = db.TextProperty()

  fruttaTipo = db.StringProperty(default="")
  fruttaAssaggio = db.IntegerProperty()
  fruttaGradimento = db.IntegerProperty()
  fruttaQuantita = db.IntegerProperty()
  #fruttaNote = db.TextProperty()

  finePasto = db.TimeProperty()
  lavaggioFinale = db.IntegerProperty()
  smaltimentoRifiuti = db.IntegerProperty()
  giudizioGlobale = db.IntegerProperty()
  note = db.TextProperty(default="")

class Statistiche:
  numeroSchede = int(0)
  
  primoAssaggio = float(0)
  primoGradimento = float(0)
  secondoAssaggio = float(0)
  secondoGradimento = float(0)
  contornoAssaggio = float(0)
  contornoGradimento = float(0)

  puliziaRefettorio = float(0)
  lavaggioFinale = float(0)
  smaltimentoRifiuti = float(0)
  giudizioGlobale = float(0)

  ncCrudoBruciato = int(0)
  ncCorpiEstranei = int(0)
  ncCattivoOdore = int(0)
  ncGustoSospetto = int(0)
  ncRichiestaCampionatura = int(0)
